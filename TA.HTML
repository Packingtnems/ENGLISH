<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªçc T·ª´ V·ª±ng Ti·∫øng Anh T·ª± ƒê·ªông</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0c2461 0%, #1e3799 50%, #4a69bd 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .container {
            max-width: 1000px;
            width: 100%;
            background-color: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            margin-top: 20px;
        }
        
        header {
            background: linear-gradient(90deg, #1e3c72, #2a5298);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .app-description {
            padding: 20px;
            text-align: center;
            line-height: 1.6;
            color: #555;
            border-bottom: 1px solid #eee;
            background-color: #f8f9fa;
        }
        
        .highlight {
            background-color: #fffacd;
            padding: 3px 8px;
            border-radius: 5px;
            font-weight: bold;
            color: #d35400;
        }
        
        .learning-area {
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .vocabulary-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        @media (max-width: 768px) {
            .vocabulary-container {
                grid-template-columns: 1fr;
            }
        }
        
        .vocabulary-box {
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .english-word {
            background-color: #e8f4fc;
            border-left: 5px solid #2980b9;
        }
        
        .vietnamese-meaning {
            background-color: #f0e6fa;
            border-left: 5px solid #8e44ad;
        }
        
        .box-header {
            font-size: 0.9rem;
            text-transform: uppercase;
            color: #666;
            margin-bottom: 10px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .word-text {
            font-size: 2.2rem;
            line-height: 1.3;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .phonetic-text {
            font-size: 1.2rem;
            color: #e74c3c;
            font-style: italic;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .word-type {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .example-sentence {
            font-size: 1.1rem;
            color: #2c3e50;
            font-style: italic;
            margin-top: 10px;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            border-left: 3px solid #f1c40f;
        }
        
        .meaning-text {
            font-size: 1.7rem;
            line-height: 1.5;
            font-weight: 700;
        }
        
        .english-text {
            color: #1a5276;
        }
        
        .vietnamese-text {
            color: #6c3483;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 14px 28px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 160px;
            justify-content: center;
        }
        
        .start-btn {
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            color: white;
        }
        
        .pause-btn {
            background: linear-gradient(90deg, #e67e22, #f39c12);
            color: white;
        }
        
        .next-btn {
            background: linear-gradient(90deg, #2980b9, #3498db);
            color: white;
        }
        
        .repeat-btn {
            background: linear-gradient(90deg, #8e44ad, #9b59b6);
            color: white;
        }
        
        .add-btn {
            background: linear-gradient(90deg, #16a085, #1abc9c);
            color: white;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .status-area {
            margin-top: 20px;
            padding: 20px;
            background-color: #f1f8e9;
            border-radius: 15px;
            text-align: center;
        }
        
        .status-text {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2e7d32;
            margin-bottom: 10px;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .step-indicator {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
        }
        
        .step {
            width: 120px;
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            font-weight: 600;
            background-color: #e0e0e0;
            color: #666;
            transition: all 0.3s ease;
        }
        
        .step.active {
            background-color: #4CAF50;
            color: white;
            transform: scale(1.05);
            box-shadow: 0 3px 10px rgba(76, 175, 80, 0.3);
        }
        
        .step.completed {
            background-color: #8BC34A;
            color: white;
        }
        
        .repeat-counter {
            font-size: 1.2rem;
            color: #555;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .progress-bar {
            width: 100%;
            height: 12px;
            background-color: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2980b9, #8e44ad);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            color: #666;
            font-size: 0.95rem;
            font-weight: 600;
        }
        
        .settings {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 15px;
        }
        
        .settings h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .settings-group {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
        }
        
        .setting-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
            min-width: 200px;
        }
        
        .speed-controls {
            display: flex;
            gap: 20px;
            justify-content: center;
            width: 100%;
        }
        
        .speed-control {
            flex: 1;
            min-width: 200px;
        }
        
        label {
            font-weight: 600;
            color: #555;
        }
        
        select, input, textarea {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s;
            width: 100%;
        }
        
        textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        select:focus, input:focus, textarea:focus {
            border-color: #3498db;
            outline: none;
        }
        
        input[type="range"] {
            width: 100%;
        }
        
        .range-value {
            text-align: center;
            font-weight: 600;
            color: #2980b9;
        }
        
        .add-vocab-form {
            margin-top: 30px;
            padding: 25px;
            background-color: #e8f4fd;
            border-radius: 15px;
            border: 2px dashed #3498db;
        }
        
        .form-title {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .form-input {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
        
        .form-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .vocabulary-list {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 15px;
        }
        
        .vocabulary-list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .vocabulary-list-header h3 {
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 0;
        }
        
        .list-controls {
            display: flex;
            gap: 10px;
        }
        
        .vocabulary-item {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .vocabulary-item:hover {
            background-color: #eef5ff;
        }
        
        .vocabulary-item.current {
            background-color: #e3f2fd;
            border-left: 4px solid #2980b9;
        }
        
        .vocabulary-item:last-child {
            border-bottom: none;
        }
        
        .vocabulary-content {
            flex: 1;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }
        
        .vocabulary-main {
            flex: 1;
        }
        
        .vocabulary-word {
            font-size: 1.3rem;
            font-weight: 700;
            color: #1a5276;
            margin-bottom: 5px;
        }
        
        .vocabulary-phonetic {
            font-size: 0.9rem;
            color: #e74c3c;
            font-style: italic;
            margin-bottom: 5px;
        }
        
        .vocabulary-type {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-bottom: 8px;
        }
        
        .vocabulary-meaning {
            color: #6c3483;
            font-weight: 600;
        }
        
        .vocabulary-example {
            font-size: 0.9rem;
            color: #666;
            font-style: italic;
            margin-top: 5px;
        }
        
        .vocabulary-actions {
            display: flex;
            gap: 10px;
            margin-left: 20px;
        }
        
        .action-btn {
            padding: 5px 12px;
            border-radius: 5px;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            border: none;
            transition: all 0.2s;
        }
        
        .delete-btn {
            background-color: #ffebee;
            color: #c62828;
        }
        
        .delete-btn:hover {
            background-color: #ffcdd2;
        }
        
        .play-btn {
            background-color: #e8f5e9;
            color: #2e7d32;
        }
        
        .play-btn:hover {
            background-color: #c8e6c9;
        }
        
        footer {
            margin-top: 30px;
            text-align: center;
            color: white;
            padding: 20px;
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .pulse {
            animation: pulse 0.6s ease-in-out;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        
        .speaking {
            position: relative;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.3);
        }
        
        .speaking::after {
            content: "üîä";
            position: absolute;
            right: 20px;
            top: 20px;
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }
        
        .auto-mode {
            display: inline-block;
            background-color: #fff3cd;
            color: #856404;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background-color: #4CAF50;
            color: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.error {
            background-color: #f44336;
        }
        
        @media (max-width: 768px) {
            .container {
                border-radius: 15px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .word-text {
                font-size: 1.8rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            button {
                width: 100%;
            }
            
            .speed-controls {
                flex-direction: column;
            }
            
            .step-indicator {
                flex-direction: column;
                align-items: center;
            }
            
            .step {
                width: 90%;
            }
            
            .vocabulary-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .vocabulary-actions {
                margin-left: 0;
                margin-top: 10px;
                width: 100%;
                justify-content: flex-end;
            }
            
            .notification {
                left: 20px;
                right: 20px;
                transform: translateY(-150%);
            }
            
            .notification.show {
                transform: translateY(0);
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Th√¥ng b√°o -->
    <div id="notification" class="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">Th√¥ng b√°o</span>
    </div>

    <div class="container">
        <header>
            <h1><i class="fas fa-book-open"></i> H·ªçc T·ª´ V·ª±ng Ti·∫øng Anh T·ª± ƒê·ªông</h1>
            <p class="subtitle">T·ª± ƒë·ªông ƒë·ªçc t·ª´ v·ª±ng ‚Üí ƒê·ªçc nghƒ©a ti·∫øng Vi·ªát ‚Üí L·∫∑p l·∫°i ‚Üí Chuy·ªÉn t·ª´ ti·∫øp theo</p>
        </header>
        
        <div class="app-description">
            <p><span class="highlight">CH·∫æ ƒê·ªò T·ª∞ ƒê·ªòNG HO√ÄN TO√ÄN:</span> ·ª®ng d·ª•ng s·∫Ω t·ª± ƒë·ªông <span class="highlight">ƒë·ªçc t·ª´ v·ª±ng ti·∫øng Anh</span>, sau ƒë√≥ <span class="highlight">ƒë·ªçc nghƒ©a ti·∫øng Vi·ªát</span>, l·∫∑p l·∫°i r·ªìi chuy·ªÉn sang t·ª´ ti·∫øp theo.</p>
            <p>H·ªçc t·ª´ v·ª±ng v·ªõi phi√™n √¢m, lo·∫°i t·ª´, v√≠ d·ª• v√† b·∫£n d·ªãch chi ti·∫øt!</p>
        </div>
        
        <div class="learning-area">
            <div class="vocabulary-container">
                <div class="vocabulary-box english-word" id="englishBox">
                    <div class="box-header">
                        <i class="fas fa-globe-americas"></i> T·ª™ V·ª∞NG TI·∫æNG ANH
                    </div>
                    <div id="wordText" class="word-text english-text">
                        Vocabulary
                    </div>
                    <div id="phoneticText" class="phonetic-text">
                        /v…ôÀàk√¶bj…ôÀåleri/
                    </div>
                    <div id="wordType" class="word-type">
                        Danh t·ª´
                    </div>
                    <div id="exampleSentence" class="example-sentence">
                        He has a rich vocabulary in English.
                    </div>
                </div>
                
                <div class="vocabulary-box vietnamese-meaning" id="vietnameseBox">
                    <div class="box-header">
                        <i class="fas fa-language"></i> NGHƒ®A TI·∫æNG VI·ªÜT
                    </div>
                    <div id="meaningText" class="meaning-text vietnamese-text">
                        T·ª´ v·ª±ng, v·ªën t·ª´
                    </div>
                    <div id="additionalInfo" class="example-sentence">
                        T·∫≠p h·ª£p c√°c t·ª´ m√† m·ªôt ng∆∞·ªùi bi·∫øt ho·∫∑c s·ª≠ d·ª•ng.
                    </div>
                </div>
            </div>
            
            <div class="step-indicator">
                <div class="step" id="step1">1. ƒê·ªçc t·ª´ ti·∫øng Anh</div>
                <div class="step" id="step2">2. ƒê·ªçc nghƒ©a ti·∫øng Vi·ªát</div>
                <div class="step" id="step3">3. L·∫∑p l·∫°i</div>
            </div>
            
            <div class="controls">
                <button id="startBtn" class="start-btn">
                    <i class="fas fa-play"></i> B·∫Øt ƒë·∫ßu h·ªçc
                </button>
                <button id="pauseBtn" class="pause-btn" disabled>
                    <i class="fas fa-pause"></i> T·∫°m d·ª´ng
                </button>
                <button id="nextBtn" class="next-btn">
                    <i class="fas fa-forward"></i> T·ª´ ti·∫øp theo
                </button>
                <button id="repeatBtn" class="repeat-btn">
                    <i class="fas fa-redo"></i> L·∫∑p l·∫°i t·ª´ n√†y
                </button>
                <button id="addVocabBtn" class="add-btn">
                    <i class="fas fa-plus-circle"></i> Th√™m t·ª´ m·ªõi
                </button>
            </div>
            
            <div class="status-area">
                <div id="statusText" class="status-text">
                    <i class="fas fa-info-circle"></i> S·∫µn s√†ng ƒë·ªÉ b·∫Øt ƒë·∫ßu h·ªçc
                </div>
                <div id="repeatCounter" class="repeat-counter">L·∫∑p l·∫°i: 0/3</div>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill"></div>
                </div>
                <div class="progress-text">
                    <span>T·ª´: <span id="currentVocabNum">1</span>/<span id="totalVocabs">20</span></span>
                    <span>Ti·∫øn ƒë·ªô: <span id="progressPercent">0</span>%</span>
                </div>
            </div>
            
            <!-- Ph·∫ßn th√™m t·ª´ m·ªõi -->
            <div class="add-vocab-form" id="addVocabForm" style="display: none;">
                <div class="form-title">
                    <i class="fas fa-plus-circle"></i> Th√™m t·ª´ v·ª±ng m·ªõi v√†o danh s√°ch h·ªçc
                </div>
                <div class="form-grid">
                    <div class="form-input">
                        <label for="newEnglishWord">T·ª´ ti·∫øng Anh:</label>
                        <input type="text" id="newEnglishWord" placeholder="Nh·∫≠p t·ª´ ti·∫øng Anh...">
                    </div>
                    
                    <div class="form-input">
                        <label for="newPhonetic">Phi√™n √¢m:</label>
                        <input type="text" id="newPhonetic" placeholder="VD: /Àà√¶pl/">
                    </div>
                    
                    <div class="form-input">
                        <label for="newWordType">Lo·∫°i t·ª´:</label>
                        <select id="newWordType">
                            <option value="Danh t·ª´">Danh t·ª´</option>
                            <option value="ƒê·ªông t·ª´">ƒê·ªông t·ª´</option>
                            <option value="T√≠nh t·ª´">T√≠nh t·ª´</option>
                            <option value="Tr·∫°ng t·ª´">Tr·∫°ng t·ª´</option>
                            <option value="Gi·ªõi t·ª´">Gi·ªõi t·ª´</option>
                            <option value="Li√™n t·ª´">Li√™n t·ª´</option>
                            <option value="ƒê·∫°i t·ª´">ƒê·∫°i t·ª´</option>
                            <option value="Th√°n t·ª´">Th√°n t·ª´</option>
                        </select>
                    </div>
                    
                    <div class="form-input">
                        <label for="newVietnameseMeaning">Nghƒ©a ti·∫øng Vi·ªát:</label>
                        <input type="text" id="newVietnameseMeaning" placeholder="Nh·∫≠p nghƒ©a ti·∫øng Vi·ªát...">
                    </div>
                    
                    <div class="form-input full-width">
                        <label for="newExampleSentence">V√≠ d·ª• (ti·∫øng Anh):</label>
                        <textarea id="newExampleSentence" placeholder="Nh·∫≠p c√¢u v√≠ d·ª•..."></textarea>
                    </div>
                    
                    <div class="form-input full-width">
                        <label for="newAdditionalInfo">Th√¥ng tin b·ªï sung:</label>
                        <textarea id="newAdditionalInfo" placeholder="Gi·∫£i th√≠ch th√™m, t·ª´ ƒë·ªìng nghƒ©a, v.v..."></textarea>
                    </div>
                </div>
                <div class="form-actions">
                    <button id="saveVocabBtn" class="start-btn">
                        <i class="fas fa-save"></i> L∆∞u t·ª´ m·ªõi
                    </button>
                    <button id="cancelAddBtn" class="pause-btn">
                        <i class="fas fa-times"></i> H·ªßy
                    </button>
                </div>
            </div>
            
            <div class="settings">
                <h3><i class="fas fa-cog"></i> C√†i ƒë·∫∑t h·ªçc t·∫≠p</h3>
                <div class="speed-controls">
                    <div class="speed-control">
                        <label for="englishSpeed">T·ªëc ƒë·ªô ƒë·ªçc ti·∫øng Anh:</label>
                        <select id="englishSpeed">
                            <option value="0.7">R·∫•t ch·∫≠m</option>
                            <option value="0.8">Ch·∫≠m</option>
                            <option value="1.0" selected>B√¨nh th∆∞·ªùng</option>
                            <option value="1.2">Nhanh</option>
                            <option value="1.4">R·∫•t nhanh</option>
                        </select>
                    </div>
                    
                    <div class="speed-control">
                        <label for="vietnameseSpeed">T·ªëc ƒë·ªô ƒë·ªçc ti·∫øng Vi·ªát:</label>
                        <select id="vietnameseSpeed">
                            <option value="0.7">R·∫•t ch·∫≠m</option>
                            <option value="0.8">Ch·∫≠m</option>
                            <option value="1.0" selected>B√¨nh th∆∞·ªùng</option>
                            <option value="1.2">Nhanh</option>
                            <option value="1.4">R·∫•t nhanh</option>
                        </select>
                    </div>
                </div>
                
                <div class="settings-group">
                    <div class="setting-item">
                        <label for="repeatCount">S·ªë l·∫ßn l·∫∑p l·∫°i m·ªói t·ª´:</label>
                        <select id="repeatCount">
                            <option value="2">2 l·∫ßn</option>
                            <option value="3" selected>3 l·∫ßn</option>
                            <option value="4">4 l·∫ßn</option>
                            <option value="5">5 l·∫ßn</option>
                            <option value="6">6 l·∫ßn</option>
                        </select>
                    </div>
                    
                    <div class="setting-item">
                        <label for="delayTime">Th·ªùi gian ch·ªù (gi√¢y): <span id="delayValue" class="range-value">1.5</span></label>
                        <input type="range" id="delayTime" min="0.5" max="3" step="0.1" value="1.5">
                    </div>
                </div>
            </div>
            
            <div class="vocabulary-list">
                <div class="vocabulary-list-header">
                    <h3><i class="fas fa-list-ol"></i> Danh s√°ch t·ª´ v·ª±ng (<span id="vocabCount">20</span> t·ª´)</h3>
                    <div class="list-controls">
                        <button id="playAllBtn" class="play-btn action-btn">
                            <i class="fas fa-play"></i> Nghe t·∫•t c·∫£
                        </button>
                        <button id="clearAllBtn" class="delete-btn action-btn">
                            <i class="fas fa-trash"></i> X√≥a t·∫•t c·∫£
                        </button>
                    </div>
                </div>
                <div id="vocabularyHistory">
                    <!-- Danh s√°ch t·ª´ v·ª±ng s·∫Ω ƒë∆∞·ª£c th√™m v√†o ƒë√¢y -->
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>·ª®ng d·ª•ng H·ªçc T·ª´ V·ª±ng Ti·∫øng Anh T·ª± ƒê·ªông &copy; 2023 - H·ªçc t·ª´ v·ª±ng v·ªõi phi√™n √¢m v√† v√≠ d·ª•</p>
    </footer>

    <script>
        // D·ªØ li·ªáu t·ª´ v·ª±ng ti·∫øng Anh
        let vocabulary = [
            {
                word: "Vocabulary",
                phonetic: "/v…ôÀàk√¶bj…ôÀåleri/",
                type: "Danh t·ª´",
                meaning: "T·ª´ v·ª±ng, v·ªën t·ª´",
                example: "He has a rich vocabulary in English.",
                additional: "T·∫≠p h·ª£p c√°c t·ª´ m√† m·ªôt ng∆∞·ªùi bi·∫øt ho·∫∑c s·ª≠ d·ª•ng."
            },
            {
                word: "Pronunciation",
                phonetic: "/pr…ôÀån ånsiÀàe…™ É…ôn/",
                type: "Danh t·ª´",
                meaning: "Ph√°t √¢m",
                example: "Her pronunciation is very clear.",
                additional: "C√°ch ph√°t √¢m m·ªôt t·ª´ ho·∫∑c ng√¥n ng·ªØ."
            },
            {
                word: "Grammar",
                phonetic: "/Àà…°r√¶m…ôr/",
                type: "Danh t·ª´",
                meaning: "Ng·ªØ ph√°p",
                example: "English grammar can be difficult for beginners.",
                additional: "H·ªá th·ªëng c√°c quy t·∫Øc c·ªßa m·ªôt ng√¥n ng·ªØ."
            },
            {
                word: "Fluency",
                phonetic: "/ÀàfluÀê…ônsi/",
                type: "Danh t·ª´",
                meaning: "S·ª± tr√¥i ch·∫£y",
                example: "He speaks English with great fluency.",
                additional: "Kh·∫£ nƒÉng n√≥i ho·∫∑c vi·∫øt m·ªôt c√°ch d·ªÖ d√†ng v√† tr√¥i ch·∫£y."
            },
            {
                word: "Comprehension",
                phonetic: "/Àåk…ëÀêmpr…™Ààhen É…ôn/",
                type: "Danh t·ª´",
                meaning: "S·ª± hi·ªÉu bi·∫øt, kh·∫£ nƒÉng hi·ªÉu",
                example: "Reading comprehension is important for learning.",
                additional: "Kh·∫£ nƒÉng hi·ªÉu th√¥ng tin ho·∫∑c √Ω nghƒ©a."
            },
            {
                word: "Communication",
                phonetic: "/k…ôÀåmjuÀên…™Ààke…™ É…ôn/",
                type: "Danh t·ª´",
                meaning: "Giao ti·∫øp, truy·ªÅn th√¥ng",
                example: "Good communication is key to success.",
                additional: "Ho·∫°t ƒë·ªông truy·ªÅn ƒë·∫°t th√¥ng tin ho·∫∑c √Ω t∆∞·ªüng."
            },
            {
                word: "Practice",
                phonetic: "/Ààpr√¶kt…™s/",
                type: "Danh t·ª´/ƒê·ªông t·ª´",
                meaning: "Th·ª±c h√†nh, luy·ªán t·∫≠p",
                example: "Practice makes perfect.",
                additional: "L·∫∑p ƒëi l·∫∑p l·∫°i m·ªôt ho·∫°t ƒë·ªông ƒë·ªÉ tr·ªü n√™n th√†nh th·∫°o."
            },
            {
                word: "Improve",
                phonetic: "/…™mÀàpruÀêv/",
                type: "ƒê·ªông t·ª´",
                meaning: "C·∫£i thi·ªán, n√¢ng cao",
                example: "She wants to improve her English skills.",
                additional: "L√†m cho c√°i g√¨ ƒë√≥ tr·ªü n√™n t·ªët h∆°n."
            },
            {
                word: "Accent",
                phonetic: "/Àà√¶ksent/",
                type: "Danh t·ª´",
                meaning: "Gi·ªçng, tr·ªçng √¢m",
                example: "He has a British accent.",
                additional: "C√°ch ph√°t √¢m ƒë·∫∑c tr∆∞ng c·ªßa m·ªôt v√πng ho·∫∑c qu·ªëc gia."
            },
            {
                word: "Conversation",
                phonetic: "/Àåk…ëÀênv…ôrÀàse…™ É…ôn/",
                type: "Danh t·ª´",
                meaning: "Cu·ªôc tr√≤ chuy·ªán, h·ªôi tho·∫°i",
                example: "We had an interesting conversation about travel.",
                additional: "Trao ƒë·ªïi l·ªùi n√≥i gi·ªØa hai ho·∫∑c nhi·ªÅu ng∆∞·ªùi."
            },
            {
                word: "Confident",
                phonetic: "/Ààk…ëÀênf…™d…ônt/",
                type: "T√≠nh t·ª´",
                meaning: "T·ª± tin",
                example: "Be confident when you speak English.",
                additional: "Tin t∆∞·ªüng v√†o kh·∫£ nƒÉng ho·∫∑c ph·∫©m ch·∫•t c·ªßa m√¨nh."
            },
            {
                word: "Essential",
                phonetic: "/…™Ààsen É…ôl/",
                type: "T√≠nh t·ª´",
                meaning: "C·∫ßn thi·∫øt, thi·∫øt y·∫øu",
                example: "Vocabulary is essential for language learning.",
                additional: "C·ª±c k·ª≥ quan tr·ªçng v√† kh√¥ng th·ªÉ thi·∫øu."
            },
            {
                word: "Challenge",
                phonetic: "/Ààt É√¶l…™nd í/",
                type: "Danh t·ª´",
                meaning: "Th√°ch th·ª©c",
                example: "Learning a new language is a big challenge.",
                additional: "M·ªôt nhi·ªám v·ª• kh√≥ khƒÉn ƒë√≤i h·ªèi n·ªó l·ª±c."
            },
            {
                word: "Motivation",
                phonetic: "/Àåmo ät…™Ààve…™ É…ôn/",
                type: "Danh t·ª´",
                meaning: "ƒê·ªông l·ª±c",
                example: "Her main motivation is to get a better job.",
                additional: "L√Ω do ho·∫∑c mong mu·ªën l√†m ƒëi·ªÅu g√¨ ƒë√≥."
            },
            {
                word: "Progress",
                phonetic: "/Ààpr…ëÀê…°res/",
                type: "Danh t·ª´",
                meaning: "Ti·∫øn b·ªô, s·ª± ti·∫øn tri·ªÉn",
                example: "I can see great progress in your English.",
                additional: "S·ª± ph√°t tri·ªÉn ho·∫∑c c·∫£i thi·ªán theo th·ªùi gian."
            },
            {
                word: "Remember",
                phonetic: "/r…™Ààmemb…ôr/",
                type: "ƒê·ªông t·ª´",
                meaning: "Nh·ªõ, ghi nh·ªõ",
                example: "I can't remember that word.",
                additional: "Gi·ªØ th√¥ng tin trong t√¢m tr√≠ ho·∫∑c nh·ªõ l·∫°i."
            },
            {
                word: "Translate",
                phonetic: "/tr√¶nsÀàle…™t/",
                type: "ƒê·ªông t·ª´",
                meaning: "D·ªãch",
                example: "Can you translate this sentence for me?",
                additional: "Chuy·ªÉn ƒë·ªïi t·ª´ ng√¥n ng·ªØ n√†y sang ng√¥n ng·ªØ kh√°c."
            },
            {
                word: "Understand",
                phonetic: "/Àå ånd…ôrÀàst√¶nd/",
                type: "ƒê·ªông t·ª´",
                meaning: "Hi·ªÉu",
                example: "Do you understand the question?",
                additional: "N·∫Øm b·∫Øt ƒë∆∞·ª£c √Ω nghƒ©a ho·∫∑c b·∫£n ch·∫•t c·ªßa ƒëi·ªÅu g√¨ ƒë√≥."
            },
            {
                word: "Listen",
                phonetic: "/Ààl…™s…ôn/",
                type: "ƒê·ªông t·ª´",
                meaning: "Nghe, l·∫Øng nghe",
                example: "Listen carefully to the pronunciation.",
                additional: "Ch√∫ √Ω ƒë·∫øn √¢m thanh ƒë·ªÉ nghe ƒë∆∞·ª£c."
            },
            {
                word: "Speak",
                phonetic: "/spiÀêk/",
                type: "ƒê·ªông t·ª´",
                meaning: "N√≥i",
                example: "Can you speak English?",
                additional: "S·ª≠ d·ª•ng gi·ªçng n√≥i ƒë·ªÉ di·ªÖn ƒë·∫°t suy nghƒ©."
            }
        ];

        // Bi·∫øn l∆∞u tr·ªØ tr·∫°ng th√°i
        let currentIndex = 0;
        let repeatCount = 0;
        let isPlaying = false;
        let isSpeaking = false;
        let timer = null;
        let currentStep = 0; // 0: ch·ªù, 1: ƒë·ªçc ti·∫øng Anh, 2: ƒë·ªçc ti·∫øng Vi·ªát, 3: ch·ªù l·∫∑p l·∫°i
        
        // C√°c ph·∫ßn t·ª≠ DOM
        const wordTextEl = document.getElementById('wordText');
        const phoneticTextEl = document.getElementById('phoneticText');
        const wordTypeEl = document.getElementById('wordType');
        const exampleSentenceEl = document.getElementById('exampleSentence');
        const meaningTextEl = document.getElementById('meaningText');
        const additionalInfoEl = document.getElementById('additionalInfo');
        const englishBoxEl = document.getElementById('englishBox');
        const vietnameseBoxEl = document.getElementById('vietnameseBox');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const nextBtn = document.getElementById('nextBtn');
        const repeatBtn = document.getElementById('repeatBtn');
        const addVocabBtn = document.getElementById('addVocabBtn');
        const statusText = document.getElementById('statusText');
        const repeatCounter = document.getElementById('repeatCounter');
        const progressFill = document.getElementById('progressFill');
        const currentVocabNum = document.getElementById('currentVocabNum');
        const totalVocabs = document.getElementById('totalVocabs');
        const progressPercent = document.getElementById('progressPercent');
        const vocabularyHistoryEl = document.getElementById('vocabularyHistory');
        const vocabCountEl = document.getElementById('vocabCount');
        
        // C√°c ph·∫ßn t·ª≠ step indicator
        const step1 = document.getElementById('step1');
        const step2 = document.getElementById('step2');
        const step3 = document.getElementById('step3');
        
        // C√°c ph·∫ßn t·ª≠ c√†i ƒë·∫∑t
        const repeatCountSelect = document.getElementById('repeatCount');
        const englishSpeedSelect = document.getElementById('englishSpeed');
        const vietnameseSpeedSelect = document.getElementById('vietnameseSpeed');
        const delayTimeSlider = document.getElementById('delayTime');
        const delayValue = document.getElementById('delayValue');
        
        // C√°c ph·∫ßn t·ª≠ form th√™m t·ª´ m·ªõi
        const addVocabForm = document.getElementById('addVocabForm');
        const newEnglishWord = document.getElementById('newEnglishWord');
        const newPhonetic = document.getElementById('newPhonetic');
        const newWordType = document.getElementById('newWordType');
        const newVietnameseMeaning = document.getElementById('newVietnameseMeaning');
        const newExampleSentence = document.getElementById('newExampleSentence');
        const newAdditionalInfo = document.getElementById('newAdditionalInfo');
        const saveVocabBtn = document.getElementById('saveVocabBtn');
        const cancelAddBtn = document.getElementById('cancelAddBtn');
        
        // C√°c ph·∫ßn t·ª≠ danh s√°ch
        const playAllBtn = document.getElementById('playAllBtn');
        const clearAllBtn = document.getElementById('clearAllBtn');
        
        // Th√¥ng b√°o
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notificationText');

        // Kh·ªüi t·∫°o ·ª©ng d·ª•ng
        function initApp() {
            // C·∫≠p nh·∫≠t s·ªë t·ª´
            updateVocabCount();
            updateProgress();
            updateVocabularyHistory();
            
            // Hi·ªÉn th·ªã t·ª´ ƒë·∫ßu ti√™n
            displayCurrentVocabulary();
            
            // C·∫≠p nh·∫≠t gi√° tr·ªã th·ªùi gian ch·ªù
            delayValue.textContent = delayTimeSlider.value;
            delayTimeSlider.addEventListener('input', function() {
                delayValue.textContent = this.value;
            });
            
            // ƒê·∫∑t l·∫°i step indicator
            resetStepIndicator();
            
            // Ki·ªÉm tra n·∫øu c√≥ d·ªØ li·ªáu trong localStorage
            loadFromLocalStorage();
        }

        // Hi·ªÉn th·ªã t·ª´ v·ª±ng hi·ªán t·∫°i
        function displayCurrentVocabulary() {
            if (vocabulary.length === 0) {
                wordTextEl.textContent = "Ch∆∞a c√≥ t·ª´ n√†o. H√£y th√™m t·ª´ m·ªõi!";
                phoneticTextEl.textContent = "";
                wordTypeEl.textContent = "";
                exampleSentenceEl.textContent = "";
                meaningTextEl.textContent = "";
                additionalInfoEl.textContent = "";
                currentVocabNum.textContent = "0";
                return;
            }
            
            const currentVocab = vocabulary[currentIndex];
            wordTextEl.textContent = currentVocab.word;
            phoneticTextEl.textContent = currentVocab.phonetic;
            wordTypeEl.textContent = currentVocab.type;
            exampleSentenceEl.textContent = currentVocab.example;
            meaningTextEl.textContent = currentVocab.meaning;
            additionalInfoEl.textContent = currentVocab.additional;
            
            // ·∫®n b·∫£n d·ªãch ban ƒë·∫ßu (ch·ªâ hi·ªÉn th·ªã khi ƒë∆∞·ª£c ƒë·ªçc)
            vietnameseBoxEl.style.opacity = '0.7';
            
            // C·∫≠p nh·∫≠t s·ªë t·ª´ hi·ªán t·∫°i
            currentVocabNum.textContent = currentIndex + 1;
            
            updateProgress();
        }

        // C·∫≠p nh·∫≠t s·ªë t·ª´
        function updateVocabCount() {
            totalVocabs.textContent = vocabulary.length;
            vocabCountEl.textContent = vocabulary.length;
        }

        // ƒê·∫∑t l·∫°i step indicator
        function resetStepIndicator() {
            step1.classList.remove('active', 'completed');
            step2.classList.remove('active', 'completed');
            step3.classList.remove('active', 'completed');
        }

        // C·∫≠p nh·∫≠t step indicator
        function updateStepIndicator(step) {
            resetStepIndicator();
            
            if (step === 1) {
                step1.classList.add('active');
            } else if (step === 2) {
                step1.classList.add('completed');
                step2.classList.add('active');
            } else if (step === 3) {
                step1.classList.add('completed');
                step2.classList.add('completed');
                step3.classList.add('active');
            }
        }

        // B·∫Øt ƒë·∫ßu qu√° tr√¨nh h·ªçc t·ª± ƒë·ªông
        function startLearning() {
            if (vocabulary.length === 0) {
                showNotification("Ch∆∞a c√≥ t·ª´ n√†o ƒë·ªÉ h·ªçc. H√£y th√™m t·ª´ m·ªõi!", "error");
                return;
            }
            
            if (isPlaying) return;
            
            isPlaying = true;
            startBtn.disabled = true;
            pauseBtn.disabled = false;
            repeatCount = 0;
            currentStep = 0;
            
            statusText.innerHTML = '<i class="fas fa-robot"></i> ƒêang h·ªçc t·ª± ƒë·ªông... <span class="auto-mode">T·ª∞ ƒê·ªòNG</span>';
            updateRepeatCounter();
            resetStepIndicator();
            
            // B·∫Øt ƒë·∫ßu chu k·ª≥ h·ªçc
            startLearningCycle();
        }

        // Chu k·ª≥ h·ªçc: ƒê·ªçc t·ª´ ti·∫øng Anh ‚Üí ƒê·ªçc nghƒ©a ti·∫øng Vi·ªát ‚Üí L·∫∑p l·∫°i
        function startLearningCycle() {
            if (!isPlaying) return;
            
            // N·∫øu ƒë√£ l·∫∑p ƒë·ªß s·ªë l·∫ßn, chuy·ªÉn sang t·ª´ ti·∫øp theo
            if (repeatCount >= parseInt(repeatCountSelect.value)) {
                nextVocabulary();
                return;
            }
            
            // Th·ª±c hi·ªán c√°c b∆∞·ªõc trong chu k·ª≥
            if (currentStep === 0) {
                // B∆∞·ªõc 1: ƒê·ªçc t·ª´ ti·∫øng Anh
                updateStepIndicator(1);
                statusText.innerHTML = '<i class="fas fa-volume-up"></i> ƒêang ƒë·ªçc t·ª´ ti·∫øng Anh...';
                speakEnglish();
                currentStep = 1;
                
                // Sau khi ƒë·ªçc xong ti·∫øng Anh, ch·ªù r·ªìi ƒë·ªçc ti·∫øng Vi·ªát
                const englishDuration = getSpeechDuration(vocabulary[currentIndex].word) * 1000;
                timer = setTimeout(() => {
                    if (isPlaying) {
                        // B∆∞·ªõc 2: ƒê·ªçc nghƒ©a ti·∫øng Vi·ªát
                        updateStepIndicator(2);
                        statusText.innerHTML = '<i class="fas fa-volume-up"></i> ƒêang ƒë·ªçc nghƒ©a ti·∫øng Vi·ªát...';
                        speakVietnamese();
                        currentStep = 2;
                        
                        // Sau khi ƒë·ªçc xong ti·∫øng Vi·ªát, ch·ªù r·ªìi l·∫∑p l·∫°i ho·∫∑c chuy·ªÉn t·ª´
                        const vietnameseDuration = getSpeechDuration(vocabulary[currentIndex].meaning) * 1000;
                        timer = setTimeout(() => {
                            if (isPlaying) {
                                // TƒÉng b·ªô ƒë·∫øm l·∫∑p
                                repeatCount++;
                                updateRepeatCounter();
                                
                                // N·∫øu ƒë√£ l·∫∑p ƒë·ªß, chuy·ªÉn b∆∞·ªõc 3
                                if (repeatCount >= parseInt(repeatCountSelect.value)) {
                                    updateStepIndicator(3);
                                    statusText.innerHTML = '<i class="fas fa-check-circle"></i> ƒê√£ ho√†n th√†nh t·ª´ n√†y!';
                                    // Ch·ªù tr∆∞·ªõc khi chuy·ªÉn t·ª´ ti·∫øp theo
                                    timer = setTimeout(() => {
                                        if (isPlaying) nextVocabulary();
                                    }, parseFloat(delayTimeSlider.value) * 1000);
                                } else {
                                    // N·∫øu ch∆∞a ƒë·ªß, l·∫∑p l·∫°i t·ª´ ƒë·∫ßu
                                    currentStep = 0;
                                    statusText.innerHTML = '<i class="fas fa-redo"></i> L·∫∑p l·∫°i l·∫ßn ' + (repeatCount + 1) + '...';
                                    // Ch·ªù tr∆∞·ªõc khi l·∫∑p l·∫°i
                                    timer = setTimeout(startLearningCycle, parseFloat(delayTimeSlider.value) * 1000);
                                }
                            }
                        }, vietnameseDuration + 500);
                    }
                }, englishDuration + 500);
            }
        }

        // D·ª´ng qu√° tr√¨nh h·ªçc
        function pauseLearning() {
            isPlaying = false;
            startBtn.disabled = false;
            pauseBtn.disabled = true;
            
            if (timer) {
                clearTimeout(timer);
                timer = null;
            }
            
            // D·ª´ng ph√°t √¢m n·∫øu ƒëang n√≥i
            if (isSpeaking) {
                window.speechSynthesis.cancel();
                isSpeaking = false;
                englishBoxEl.classList.remove('speaking');
                vietnameseBoxEl.classList.remove('speaking');
            }
            
            resetStepIndicator();
            statusText.innerHTML = '<i class="fas fa-pause-circle"></i> ƒê√£ t·∫°m d·ª´ng';
        }

        // Chuy·ªÉn sang t·ª´ ti·∫øp theo
        function nextVocabulary() {
            // D·ª´ng ph√°t √¢m n·∫øu ƒëang n√≥i
            if (isSpeaking) {
                window.speechSynthesis.cancel();
                isSpeaking = false;
                englishBoxEl.classList.remove('speaking');
                vietnameseBoxEl.classList.remove('speaking');
            }
            
            if (vocabulary.length === 0) return;
            
            // Chuy·ªÉn t·ª´
            currentIndex = (currentIndex + 1) % vocabulary.length;
            repeatCount = 0;
            currentStep = 0;
            
            // Hi·ªÉn th·ªã t·ª´ m·ªõi
            displayCurrentVocabulary();
            updateRepeatCounter();
            updateVocabularyHistory();
            
            // N·∫øu ƒëang ch·∫ø ƒë·ªô t·ª± ƒë·ªông, ti·∫øp t·ª•c h·ªçc
            if (isPlaying) {
                statusText.innerHTML = '<i class="fas fa-robot"></i> ƒêang h·ªçc t·ª± ƒë·ªông... <span class="auto-mode">T·ª∞ ƒê·ªòNG</span>';
                resetStepIndicator();
                startLearningCycle();
            } else {
                statusText.innerHTML = '<i class="fas fa-info-circle"></i> S·∫µn s√†ng ƒë·ªÉ h·ªçc t·ª´ ti·∫øp theo';
                resetStepIndicator();
            }
        }

        // L·∫∑p l·∫°i t·ª´ hi·ªán t·∫°i
        function repeatCurrentVocabulary() {
            if (vocabulary.length === 0) {
                showNotification("Ch∆∞a c√≥ t·ª´ n√†o ƒë·ªÉ l·∫∑p l·∫°i!", "error");
                return;
            }
            
            // D·ª´ng ph√°t √¢m n·∫øu ƒëang n√≥i
            if (isSpeaking) {
                window.speechSynthesis.cancel();
                isSpeaking = false;
                englishBoxEl.classList.remove('speaking');
                vietnameseBoxEl.classList.remove('speaking');
            }
            
            // N·∫øu ƒëang ch·∫ø ƒë·ªô t·ª± ƒë·ªông, t·∫°m d·ª´ng
            if (isPlaying) pauseLearning();
            
            // Reset b·ªô ƒë·∫øm
            repeatCount = 0;
            currentStep = 0;
            
            // C·∫≠p nh·∫≠t tr·∫°ng th√°i
            updateRepeatCounter();
            statusText.innerHTML = '<i class="fas fa-redo"></i> ƒêang l·∫∑p l·∫°i t·ª´ n√†y...';
            resetStepIndicator();
            
            // ƒê·ªçc ti·∫øng Anh r·ªìi ti·∫øng Vi·ªát
            updateStepIndicator(1);
            speakEnglish();
            
            const englishDuration = getSpeechDuration(vocabulary[currentIndex].word) * 1000;
            setTimeout(() => {
                updateStepIndicator(2);
                speakVietnamese();
                
                const vietnameseDuration = getSpeechDuration(vocabulary[currentIndex].meaning) * 1000;
                setTimeout(() => {
                    updateStepIndicator(3);
                    statusText.innerHTML = '<i class="fas fa-check-circle"></i> ƒê√£ l·∫∑p l·∫°i t·ª´ n√†y';
                    setTimeout(() => {
                        resetStepIndicator();
                        statusText.innerHTML = '<i class="fas fa-info-circle"></i> S·∫µn s√†ng';
                    }, 1500);
                }, vietnameseDuration + 500);
            }, englishDuration + 500);
        }

        // ƒê·ªçc t·ª´ ti·∫øng Anh
        function speakEnglish() {
            if (vocabulary.length === 0) return;
            
            const currentVocab = vocabulary[currentIndex];
            const utterance = new SpeechSynthesisUtterance(currentVocab.word);
            utterance.lang = 'en-US';
            utterance.rate = parseFloat(englishSpeedSelect.value);
            
            // Hi·ªáu ·ª©ng ƒëang n√≥i ti·∫øng Anh
            englishBoxEl.classList.add('speaking');
            englishBoxEl.classList.add('pulse');
            vietnameseBoxEl.classList.remove('speaking');
            isSpeaking = true;
            
            utterance.onend = function() {
                englishBoxEl.classList.remove('speaking');
                englishBoxEl.classList.remove('pulse');
                // Hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß b·∫£n d·ªãch khi ƒë·ªçc xong ti·∫øng Anh
                vietnameseBoxEl.style.opacity = '1';
            };
            
            window.speechSynthesis.speak(utterance);
        }

        // ƒê·ªçc nghƒ©a ti·∫øng Vi·ªát
        function speakVietnamese() {
            if (vocabulary.length === 0) return;
            
            const currentVocab = vocabulary[currentIndex];
            const utterance = new SpeechSynthesisUtterance(currentVocab.meaning);
            utterance.lang = 'vi-VN';
            utterance.rate = parseFloat(vietnameseSpeedSelect.value);
            
            // Hi·ªáu ·ª©ng ƒëang n√≥i ti·∫øng Vi·ªát
            vietnameseBoxEl.classList.add('speaking');
            vietnameseBoxEl.classList.add('pulse');
            englishBoxEl.classList.remove('speaking');
            isSpeaking = true;
            
            utterance.onend = function() {
                vietnameseBoxEl.classList.remove('speaking');
                vietnameseBoxEl.classList.remove('pulse');
                isSpeaking = false;
            };
            
            window.speechSynthesis.speak(utterance);
        }

        // ∆Ø·ªõc t√≠nh th·ªùi gian ƒë·ªçc
        function getSpeechDuration(text) {
            const words = text.split(' ').length;
            const duration = words * 0.6; // Gi·∫£ s·ª≠ m·ªói t·ª´ m·∫•t 0.6 gi√¢y
            return Math.max(duration, 1.5); // T·ªëi thi·ªÉu 1.5 gi√¢y
        }

        // C·∫≠p nh·∫≠t b·ªô ƒë·∫øm l·∫∑p
        function updateRepeatCounter() {
            repeatCounter.textContent = `L·∫∑p l·∫°i: ${repeatCount}/${repeatCountSelect.value}`;
        }

        // C·∫≠p nh·∫≠t ti·∫øn ƒë·ªô
        function updateProgress() {
            if (vocabulary.length === 0) {
                progressFill.style.width = `0%`;
                progressPercent.textContent = 0;
                return;
            }
            
            const percent = ((currentIndex + 1) / vocabulary.length) * 100;
            progressFill.style.width = `${percent}%`;
            progressPercent.textContent = Math.round(percent);
        }

        // Hi·ªÉn th·ªã th√¥ng b√°o
        function showNotification(message, type = "success") {
            notificationText.textContent = message;
            notification.className = "notification";
            
            if (type === "error") {
                notification.classList.add("error");
                notification.querySelector("i").className = "fas fa-exclamation-circle";
            } else {
                notification.querySelector("i").className = "fas fa-check-circle";
            }
            
            notification.classList.add("show");
            
            setTimeout(() => {
                notification.classList.remove("show");
            }, 3000);
        }

        // Hi·ªÉn th·ªã form th√™m t·ª´ m·ªõi
        function showAddVocabForm() {
            addVocabForm.style.display = "block";
            newEnglishWord.value = "";
            newPhonetic.value = "";
            newWordType.value = "Danh t·ª´";
            newVietnameseMeaning.value = "";
            newExampleSentence.value = "";
            newAdditionalInfo.value = "";
            newEnglishWord.focus();
        }

        // ·∫®n form th√™m t·ª´ m·ªõi
        function hideAddVocabForm() {
            addVocabForm.style.display = "none";
        }

        // Th√™m t·ª´ m·ªõi v√†o danh s√°ch
        function addNewVocabulary() {
            const english = newEnglishWord.value.trim();
            const phonetic = newPhonetic.value.trim();
            const type = newWordType.value;
            const meaning = newVietnameseMeaning.value.trim();
            const example = newExampleSentence.value.trim();
            const additional = newAdditionalInfo.value.trim();
            
            if (!english) {
                showNotification("Vui l√≤ng nh·∫≠p t·ª´ ti·∫øng Anh!", "error");
                newEnglishWord.focus();
                return;
            }
            
            if (!meaning) {
                showNotification("Vui l√≤ng nh·∫≠p nghƒ©a ti·∫øng Vi·ªát!", "error");
                newVietnameseMeaning.focus();
                return;
            }
            
            // Th√™m t·ª´ m·ªõi
            vocabulary.push({
                word: english,
                phonetic: phonetic || `/${english.toLowerCase()}/`,
                type: type,
                meaning: meaning,
                example: example || `Example with "${english}"`,
                additional: additional || `Th√¥ng tin v·ªÅ t·ª´ "${english}"`
            });
            
            // Chuy·ªÉn ƒë·∫øn t·ª´ m·ªõi
            currentIndex = vocabulary.length - 1;
            
            // C·∫≠p nh·∫≠t giao di·ªán
            displayCurrentVocabulary();
            updateVocabCount();
            updateVocabularyHistory();
            hideAddVocabForm();
            
            // L∆∞u v√†o localStorage
            saveToLocalStorage();
            
            showNotification("ƒê√£ th√™m t·ª´ m·ªõi th√†nh c√¥ng!");
            
            // ƒê·ªçc th·ª≠ t·ª´ m·ªõi
            setTimeout(() => {
                repeatCurrentVocabulary();
            }, 500);
        }

        // X√≥a m·ªôt t·ª´
        function deleteVocabulary(index) {
            if (vocabulary.length <= 1) {
                showNotification("Kh√¥ng th·ªÉ x√≥a t·ª´ cu·ªëi c√πng!", "error");
                return;
            }
            
            if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·ª´ n√†y?")) {
                vocabulary.splice(index, 1);
                
                // ƒêi·ªÅu ch·ªânh currentIndex n·∫øu c·∫ßn
                if (currentIndex >= vocabulary.length) {
                    currentIndex = vocabulary.length - 1;
                }
                
                // C·∫≠p nh·∫≠t giao di·ªán
                displayCurrentVocabulary();
                updateVocabCount();
                updateVocabularyHistory();
                
                // L∆∞u v√†o localStorage
                saveToLocalStorage();
                
                showNotification("ƒê√£ x√≥a t·ª´ th√†nh c√¥ng!");
            }
        }

        // Ch·ªçn v√† ƒë·ªçc m·ªôt t·ª´ c·ª• th·ªÉ
        function selectAndPlayVocabulary(index) {
            if (isPlaying) pauseLearning();
            
            currentIndex = index;
            repeatCount = 0;
            currentStep = 0;
            displayCurrentVocabulary();
            updateRepeatCounter();
            updateVocabularyHistory();
            resetStepIndicator();
            statusText.innerHTML = '<i class="fas fa-info-circle"></i> ƒê√£ ch·ªçn t·ª´ m·ªõi';
            
            // ƒê·ªçc t·ª´ ƒë√£ ch·ªçn
            repeatCurrentVocabulary();
        }

        // Ph√°t t·∫•t c·∫£ c√°c t·ª´
        function playAllVocabulary() {
            if (vocabulary.length === 0) {
                showNotification("Ch∆∞a c√≥ t·ª´ n√†o ƒë·ªÉ ph√°t!", "error");
                return;
            }
            
            if (isPlaying) pauseLearning();
            
            // Ch·ªçn t·ª´ ƒë·∫ßu ti√™n
            currentIndex = 0;
            displayCurrentVocabulary();
            updateVocabularyHistory();
            
            // B·∫Øt ƒë·∫ßu h·ªçc t·ª± ƒë·ªông
            startLearning();
        }

        // X√≥a t·∫•t c·∫£ c√°c t·ª´
        function clearAllVocabulary() {
            if (vocabulary.length === 0) {
                showNotification("Danh s√°ch t·ª´ ƒë√£ tr·ªëng!", "error");
                return;
            }
            
            if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a T·∫§T C·∫¢ c√°c t·ª´? H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c!")) {
                vocabulary = [];
                currentIndex = 0;
                
                // C·∫≠p nh·∫≠t giao di·ªán
                displayCurrentVocabulary();
                updateVocabCount();
                updateVocabularyHistory();
                
                // X√≥a localStorage
                localStorage.removeItem('englishVocabulary');
                
                showNotification("ƒê√£ x√≥a t·∫•t c·∫£ c√°c t·ª´!");
            }
        }

        // C·∫≠p nh·∫≠t l·ªãch s·ª≠ t·ª´ v·ª±ng
        function updateVocabularyHistory() {
            // X√≥a n·ªôi dung c≈©
            vocabularyHistoryEl.innerHTML = '';
            
            if (vocabulary.length === 0) {
                vocabularyHistoryEl.innerHTML = `
                    <div class="vocabulary-item" style="text-align: center; color: #666; font-style: italic;">
                        <p>Ch∆∞a c√≥ t·ª´ n√†o trong danh s√°ch. H√£y th√™m t·ª´ m·ªõi ƒë·ªÉ b·∫Øt ƒë·∫ßu h·ªçc!</p>
                    </div>
                `;
                return;
            }
            
            // Hi·ªÉn th·ªã t·∫•t c·∫£ c√°c t·ª´ v·ªõi t·ª´ hi·ªán t·∫°i ƒë∆∞·ª£c ƒë√°nh d·∫•u
            vocabulary.forEach((vocab, index) => {
                const vocabItem = document.createElement('div');
                vocabItem.className = 'vocabulary-item';
                
                if (index === currentIndex) {
                    vocabItem.classList.add('current');
                }
                
                vocabItem.innerHTML = `
                    <div class="vocabulary-content">
                        <div class="vocabulary-main">
                            <div class="vocabulary-word">${index + 1}. ${vocab.word}</div>
                            ${vocab.phonetic ? `<div class="vocabulary-phonetic">${vocab.phonetic}</div>` : ''}
                            <div class="vocabulary-type">${vocab.type}</div>
                            <div class="vocabulary-meaning">${vocab.meaning}</div>
                            ${vocab.example ? `<div class="vocabulary-example">"${vocab.example}"</div>` : ''}
                        </div>
                    </div>
                    <div class="vocabulary-actions">
                        <button class="play-btn action-btn" data-index="${index}">
                            <i class="fas fa-play"></i> Nghe
                        </button>
                        <button class="delete-btn action-btn" data-index="${index}">
                            <i class="fas fa-trash"></i> X√≥a
                        </button>
                    </div>
                `;
                
                // Th√™m s·ª± ki·ªán click ƒë·ªÉ ch·ªçn t·ª´
                vocabItem.addEventListener('click', (e) => {
                    if (!e.target.closest('.vocabulary-actions')) {
                        selectAndPlayVocabulary(index);
                    }
                });
                
                // Th√™m s·ª± ki·ªán cho n√∫t nghe
                vocabItem.querySelector('.play-btn').addEventListener('click', (e) => {
                    e.stopPropagation();
                    selectAndPlayVocabulary(index);
                });
                
                // Th√™m s·ª± ki·ªán cho n√∫t x√≥a
                vocabItem.querySelector('.delete-btn').addEventListener('click', (e) => {
                    e.stopPropagation();
                    deleteVocabulary(index);
                });
                
                vocabularyHistoryEl.appendChild(vocabItem);
            });
        }

        // L∆∞u d·ªØ li·ªáu v√†o localStorage
        function saveToLocalStorage() {
            try {
                localStorage.setItem('englishVocabulary', JSON.stringify(vocabulary));
                localStorage.setItem('englishVocabCurrentIndex', currentIndex.toString());
            } catch (e) {
                console.error("L·ªói khi l∆∞u v√†o localStorage:", e);
            }
        }

        // T·∫£i d·ªØ li·ªáu t·ª´ localStorage
        function loadFromLocalStorage() {
            try {
                const savedVocabulary = localStorage.getItem('englishVocabulary');
                const savedIndex = localStorage.getItem('englishVocabCurrentIndex');
                
                if (savedVocabulary) {
                    vocabulary = JSON.parse(savedVocabulary);
                    if (savedIndex) {
                        currentIndex = parseInt(savedIndex);
                        if (currentIndex >= vocabulary.length) {
                            currentIndex = 0;
                        }
                    }
                    
                    updateVocabCount();
                    displayCurrentVocabulary();
                    updateVocabularyHistory();
                    showNotification("ƒê√£ t·∫£i d·ªØ li·ªáu t·ª´ l·∫ßn h·ªçc tr∆∞·ªõc!");
                }
            } catch (e) {
                console.error("L·ªói khi t·∫£i t·ª´ localStorage:", e);
            }
        }

        // S·ª± ki·ªán khi nh·∫•n n√∫t "B·∫Øt ƒë·∫ßu h·ªçc"
        startBtn.addEventListener('click', startLearning);

        // S·ª± ki·ªán khi nh·∫•n n√∫t "T·∫°m d·ª´ng"
        pauseBtn.addEventListener('click', pauseLearning);

        // S·ª± ki·ªán khi nh·∫•n n√∫t "T·ª´ ti·∫øp theo"
        nextBtn.addEventListener('click', () => {
            if (isPlaying) pauseLearning();
            nextVocabulary();
        });

        // S·ª± ki·ªán khi nh·∫•n n√∫t "L·∫∑p l·∫°i t·ª´ n√†y"
        repeatBtn.addEventListener('click', repeatCurrentVocabulary);

        // S·ª± ki·ªán khi nh·∫•n n√∫t "Th√™m t·ª´ m·ªõi"
        addVocabBtn.addEventListener('click', showAddVocabForm);

        // S·ª± ki·ªán khi nh·∫•n n√∫t "L∆∞u t·ª´ m·ªõi"
        saveVocabBtn.addEventListener('click', addNewVocabulary);

        // S·ª± ki·ªán khi nh·∫•n n√∫t "H·ªßy"
        cancelAddBtn.addEventListener('click', hideAddVocabForm);

        // S·ª± ki·ªán khi nh·∫•n n√∫t "Nghe t·∫•t c·∫£"
        playAllBtn.addEventListener('click', playAllVocabulary);

        // S·ª± ki·ªán khi nh·∫•n n√∫t "X√≥a t·∫•t c·∫£"
        clearAllBtn.addEventListener('click', clearAllVocabulary);

        // Th√™m ph√≠m t·∫Øt
        document.addEventListener('keydown', function(event) {
            if (event.target.tagName === 'TEXTAREA' || event.target.tagName === 'INPUT' || event.target.tagName === 'SELECT') return;
            
            switch(event.key) {
                case ' ':
                case 'Enter':
                    if (isPlaying) {
                        pauseLearning();
                    } else {
                        startLearning();
                    }
                    event.preventDefault();
                    break;
                case 'ArrowRight':
                    if (isPlaying) pauseLearning();
                    nextVocabulary();
                    break;
                case 'r':
                case 'R':
                    repeatCurrentVocabulary();
                    break;
                case 'a':
                case 'A':
                    if (event.ctrlKey) {
                        event.preventDefault();
                        showAddVocabForm();
                    }
                    break;
                case 'Escape':
                    pauseLearning();
                    if (addVocabForm.style.display === 'block') {
                        hideAddVocabForm();
                    }
                    break;
            }
        });

        // Kh·ªüi t·∫°o ·ª©ng d·ª•ng
        initApp();
    </script>
</body>
</html>